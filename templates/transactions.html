{% extends "base.html" %}
{% block content %}
<h2>All Transactions</h2>

<form method="get" style="margin-bottom: 10px;">
  <input name="q" value="{{ q }}" placeholder="Search by category or note" />
  <button type="submit">Search</button>
  <a href="{{ url_for('transactions') }}">Clear</a>
</form>

<table class="transactions">
  <thead><tr><th>ID</th><th>Date</th><th>Type</th><th>Amount</th><th>Category</th><th>Note</th><th>Actions</th></tr></thead>
  <tbody>
  {% for t in transactions %}
    <tr>
      <td>{{ t.id }}</td>
      <td>{{ t.date }}</td>
      <td>{{ t.type }}</td>
      <td>â‚¹{{ "%.2f"|format(t.amount) }}</td>
      <td>{{ t.category }}</td>
      <td>{{ t.note }}</td>
      <td>
        <a href="{{ url_for('edit', tx_id=t.id) }}">Edit</a>
        <form method="post" action="{{ url_for('delete', tx_id=t.id) }}" style="display:inline;">
          <button type="submit" onclick="return confirm('Delete this?')">Delete</button>
        </form>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
